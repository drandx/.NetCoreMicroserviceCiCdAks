name: $(Date:yyyyMMdd).$(Rev:rr)

trigger:
- master

pool:
  vmImage: "vs2017-win2016"

stages:

#- task: DotNetCoreCLI@2
#  displayName: 'dotnet build'
#  inputs:
#   command: 'build'
#   projects: '**/*.csproj'
#   #arguments: '--no-restore'

#- task: DotNetCoreCLI@2
#  displayName: 'Run Tests'
#  inputs:
#   command: 'test'
#   projects: '**/*Test.csproj'
#   arguments: '--no-restore'

- template: build-functions.yml
  parameters:
    stageName: 'Build_Functions'
    pathPrefix: 'Functions'

- template: build-webjobs.yml
  parameters:
    stageName: 'Build_WebJobs'
    pathPrefix: 'WebJobs'